"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Schema_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Lucid/Schema"));
class default_1 extends Schema_1.default {
    constructor() {
        super(...arguments);
        this.tableName = 'api_tokens';
    }
    async up() {
        this.schema.createTable(this.tableName, (table) => {
            table.increments('id').primary();
            table.integer('user_id').unsigned().references('id').inTable('users').onDelete('CASCADE');
            table.string('name').notNullable();
            table.string('type').notNullable();
            table.string('token', 64).notNullable().unique();
            table.timestamp('expires_at', { useTz: true }).nullable();
            table.timestamp('created_at', { useTz: true }).notNullable();
        });
    }
    async down() {
        this.schema.dropTable(this.tableName);
    }
}
exports.default = default_1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY3OTQ5NDUwMTM3MV9hcGlfdG9rZW5zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiMTY3OTQ5NDUwMTM3MV9hcGlfdG9rZW5zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsdUZBQWlEO0FBRWpELGVBQXFCLFNBQVEsZ0JBQVU7SUFBdkM7O1FBQ1ksY0FBUyxHQUFHLFlBQVksQ0FBQTtJQXFCcEMsQ0FBQztJQW5CUSxLQUFLLENBQUMsRUFBRTtRQUNiLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUNoRCxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFBO1lBQ2hDLEtBQUssQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUE7WUFDekYsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUNsQyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQ2xDLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFBO1lBS2hELEtBQUssQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUE7WUFDekQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtRQUM5RCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFTSxLQUFLLENBQUMsSUFBSTtRQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtJQUN2QyxDQUFDO0NBQ0Y7QUF0QkQsNEJBc0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VTY2hlbWEgZnJvbSAnQGlvYzpBZG9uaXMvTHVjaWQvU2NoZW1hJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIEJhc2VTY2hlbWEge1xuICBwcm90ZWN0ZWQgdGFibGVOYW1lID0gJ2FwaV90b2tlbnMnXG5cbiAgcHVibGljIGFzeW5jIHVwKCkge1xuICAgIHRoaXMuc2NoZW1hLmNyZWF0ZVRhYmxlKHRoaXMudGFibGVOYW1lLCAodGFibGUpID0+IHtcbiAgICAgIHRhYmxlLmluY3JlbWVudHMoJ2lkJykucHJpbWFyeSgpXG4gICAgICB0YWJsZS5pbnRlZ2VyKCd1c2VyX2lkJykudW5zaWduZWQoKS5yZWZlcmVuY2VzKCdpZCcpLmluVGFibGUoJ3VzZXJzJykub25EZWxldGUoJ0NBU0NBREUnKVxuICAgICAgdGFibGUuc3RyaW5nKCduYW1lJykubm90TnVsbGFibGUoKVxuICAgICAgdGFibGUuc3RyaW5nKCd0eXBlJykubm90TnVsbGFibGUoKVxuICAgICAgdGFibGUuc3RyaW5nKCd0b2tlbicsIDY0KS5ub3ROdWxsYWJsZSgpLnVuaXF1ZSgpXG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlcyB0aW1lc3RhbXB6IGZvciBQb3N0Z3JlU1FMIGFuZCBEQVRFVElNRTIgZm9yIE1TU1FMXG4gICAgICAgKi9cbiAgICAgIHRhYmxlLnRpbWVzdGFtcCgnZXhwaXJlc19hdCcsIHsgdXNlVHo6IHRydWUgfSkubnVsbGFibGUoKVxuICAgICAgdGFibGUudGltZXN0YW1wKCdjcmVhdGVkX2F0JywgeyB1c2VUejogdHJ1ZSB9KS5ub3ROdWxsYWJsZSgpXG4gICAgfSlcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkb3duKCkge1xuICAgIHRoaXMuc2NoZW1hLmRyb3BUYWJsZSh0aGlzLnRhYmxlTmFtZSlcbiAgfVxufVxuIl19