"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class SessionsController {
    async store({ request, response, auth }) {
        const { email, password } = request.only(['email', 'password']);
        const token = await auth.use('api').attempt(email, password, {
            expiresIn: '2hours',
        });
        return response.created({ user: auth.user, token });
    }
    async destroy({ response, auth }) {
        await auth.logout();
        return response.ok({});
    }
}
exports.default = SessionsController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2Vzc2lvbnNDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiU2Vzc2lvbnNDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsTUFBcUIsa0JBQWtCO0lBQzlCLEtBQUssQ0FBQyxLQUFLLENBQUUsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBdUI7UUFDbEUsTUFBTSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUMsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUE7UUFDOUQsTUFBTSxLQUFLLEdBQUcsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFO1lBQzNELFNBQVMsRUFBRSxRQUFRO1NBQ3BCLENBQUMsQ0FBQTtRQUVGLE9BQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUE7SUFDckQsQ0FBQztJQUVNLEtBQUssQ0FBQyxPQUFPLENBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUF1QjtRQUMzRCxNQUFNLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQTtRQUNuQixPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUE7SUFDeEIsQ0FBQztDQUNGO0FBZEQscUNBY0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEh0dHBDb250ZXh0Q29udHJhY3QgfSBmcm9tICdAaW9jOkFkb25pcy9Db3JlL0h0dHBDb250ZXh0J1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXNzaW9uc0NvbnRyb2xsZXIge1xuICBwdWJsaWMgYXN5bmMgc3RvcmUgKHsgcmVxdWVzdCwgcmVzcG9uc2UsIGF1dGggfTogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkfSA9IHJlcXVlc3Qub25seShbJ2VtYWlsJywgJ3Bhc3N3b3JkJ10pXG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBhdXRoLnVzZSgnYXBpJykuYXR0ZW1wdChlbWFpbCwgcGFzc3dvcmQsIHtcbiAgICAgIGV4cGlyZXNJbjogJzJob3VycycsXG4gICAgfSlcblxuICAgIHJldHVybiByZXNwb25zZS5jcmVhdGVkKHsgdXNlcjogYXV0aC51c2VyLCB0b2tlbiB9KVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlc3Ryb3kgKHsgcmVzcG9uc2UsIGF1dGggfTogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgIGF3YWl0IGF1dGgubG9nb3V0KClcbiAgICByZXR1cm4gcmVzcG9uc2Uub2soe30pXG4gIH1cbn1cbiJdfQ==